name: Configure web servers 

hosts: webservers 

become: yes 

tasks: - name: Create user blackevil on webserver1 

user: 

name: blackevil 

state: present 

shell: /bin/bash 

groups: sudo 

when: ansible_host == "172.28.178.218" # webserver1 - name: Install Nginx on webserver1 

apt: 

name: nginx 

state: present 

update_cache: yes 

when: ansible_host == "172.28.178.218" # webserver1 - name: Create user madhavan on webserver2 

user: 

name: madhavan 

state: present 

shell: /bin/bash 

groups: sudo 

when: ansible_host == "172.28.178.219" # webserver2 - name: Install Nginx on webserver2 

apt: 

name: nginx 

state: present 

update_cache: yes 

when: ansible_host == "172.28.178.219" # webserver2 - name: Configure database server 

hosts: databases 

become: yes 

tasks: - name: Create user raja on dbserver 

user: 

name: raja 

state: present 

shell: /bin/bash 

groups: sudo 

when: ansible_host == "172.28.178.220" # dbserver - name: Install MariaDB on dbserver 

apt: 

name: mariadb-server 

state: present 

update_cache: yes 

when: ansible_host == "172.28.178.220" # dbserver
